<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>A Premier League team will win the Champions League this year - VGALTES blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Vicenç García" />
  <meta name="description" content="Spain and Germany are dominating with an iron fist last Champions League editions. After a lot of investment, a Premier League team is ready to conquer the longed for trophy. In this article we&amp;rsquo;ll demonstrate this fact.
The data We&amp;rsquo;ve borrowed the data for this study from the UEFA&amp;rsquo;s official page. If you go to this address http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html# you&amp;rsquo;ll see all the matches played in the season 2010&amp;frasl;2011. Change the year in the query string to see another year&amp;rsquo;s results." />







<meta name="generator" content="Hugo 0.40.1" />


<link rel="canonical" href="http://example.org/post/a-premier-league-team-will-win-the-champions/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">







<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="A Premier League team will win the Champions League this year" />
<meta property="og:description" content="Spain and Germany are dominating with an iron fist last Champions League editions. After a lot of investment, a Premier League team is ready to conquer the longed for trophy. In this article we&rsquo;ll demonstrate this fact.
The data We&rsquo;ve borrowed the data for this study from the UEFA&rsquo;s official page. If you go to this address http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html# you&rsquo;ll see all the matches played in the season 2010&frasl;2011. Change the year in the query string to see another year&rsquo;s results." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/a-premier-league-team-will-win-the-champions/" />
















<meta itemprop="name" content="A Premier League team will win the Champions League this year">
<meta itemprop="description" content="Spain and Germany are dominating with an iron fist last Champions League editions. After a lot of investment, a Premier League team is ready to conquer the longed for trophy. In this article we&rsquo;ll demonstrate this fact.
The data We&rsquo;ve borrowed the data for this study from the UEFA&rsquo;s official page. If you go to this address http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html# you&rsquo;ll see all the matches played in the season 2010&frasl;2011. Change the year in the query string to see another year&rsquo;s results.">



<meta itemprop="wordCount" content="1315">



<meta itemprop="keywords" content="April&#39;s fools day,F#," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="A Premier League team will win the Champions League this year"/>
<meta name="twitter:description" content="Spain and Germany are dominating with an iron fist last Champions League editions. After a lot of investment, a Premier League team is ready to conquer the longed for trophy. In this article we&rsquo;ll demonstrate this fact.
The data We&rsquo;ve borrowed the data for this study from the UEFA&rsquo;s official page. If you go to this address http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html# you&rsquo;ll see all the matches played in the season 2010&frasl;2011. Change the year in the query string to see another year&rsquo;s results."/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">VGALTES</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">VGALTES</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">A Premier League team will win the Champions League this year</h1>

      <div class="post-meta">
        <span class="post-time"> 01-01-0001 </span>
        <div class="post-category">
            
              <a href="/categories/fsharp/"> FSharp </a>
            
          </div>
        <span class="more-meta"> 1315 words </span>
        <span class="more-meta"> 7 mins read </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#the-data">The data</a></li>
<li><a href="#loading-the-data">Loading the data</a></li>
<li><a href="#glories-from-the-past">Glories from the past</a></li>
<li><a href="#round-of-16">Round of 16</a></li>
<li><a href="#semifinals">Semifinals</a></li>
<li><a href="#final">Final</a></li>
<li><a href="#recap">Recap</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<p>Spain and Germany are dominating with an iron fist last Champions League editions. After a lot of investment, a Premier League team is ready to conquer the longed for trophy. In this article we&rsquo;ll demonstrate this fact.</p>

<h2 id="the-data">The data</h2>

<p>We&rsquo;ve borrowed the data for this study from the UEFA&rsquo;s official page. If you go to this address <a href="http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html#">http://www.uefa.com/uefachampionsleague/season=2011/matches/all/index.html#</a> you&rsquo;ll see all the matches played in the season <sup>2010</sup>&frasl;<sub>2011</sub>. Change the year in the query string to see another year&rsquo;s results. With this information we&rsquo;ve created a very simple CSV file which summarises the competition from the round of 16. We&rsquo;ve taken the resuls from the season <sup>2004</sup>&frasl;<sub>2005</sub> because is the first season with the actual format (the knockout rounds start at the round of 16). The CSV file looks like this:</p>

<pre><code>year,round,team1,team2,winner
2004,8,Lokomotiv Movska,Monaco,Monaco
2004,8,Celta,Arsenal,Arsenal
2004,8,Bayern,Real Madrid,Real Madrid
2004,8,Sparta Praha,Milan,Milan
2004,8,Stuttgart,Chelsea,Chelsea
2004,8,Porto,Man. United,Porto
2004,8,Real Sociedad,Lyon,Lyon
2004,8,Deportivo,Juventus,Deportivo
2004,4,Porto,Lyon,Porto
2004,4,Milan,Deportivo,Deportivo
2004,4,Real Madrid,Monaco,Monaco
2004,4,Arsenal,Chelsea,Chelsea
2004,2,Monaco,Chelsea,Monaco
2004,2,Porto,Deportivo,Porto
2004,1,Monaco,Porto,Porto
</code></pre>

<h2 id="loading-the-data">Loading the data</h2>

<p>We have a CSV file, we&rsquo;re going to use F#&hellip; <a href="http://fsharp.github.io/FSharp.Data/library/CsvProvider.html">CSV type provider</a> to the rescue!!</p>

<p>We&rsquo;re going to use <a href="https://fsprojects.github.io/Paket/">Paket</a> so add this lines to your paket.dependencies file</p>

<pre><code>source https://nuget.org/api/v2

nuget FSharp.Data
</code></pre>

<p>And this line to the paket.dependencies file of your project:</p>

<pre><code>FSharp.Data
</code></pre>

<p>Run the install command of paket and you&rsquo;ll have FSharp.Data referenced in your project. To use it from your script file, we have to reference it:</p>

<pre><code>#r &quot;../packages/FSharp.Data/lib/net40/FSharp.Data.dll&quot;
</code></pre>

<p>and open it:</p>

<pre><code>open FSharp.Data
</code></pre>

<p>Now we&rsquo;re ready to load the data. To keep things simple we&rsquo;re going to use just a couple of types to store the data</p>

<pre><code>type Team = string
type RoundGame = {Year: int; Round: int; Team1:Team; Team2:Team; Winner:Team}
</code></pre>

<p>Let&rsquo;s use the fantastic CSV type provider to load all the games:</p>

<pre><code>type ChampionsLeague = CsvProvider&lt;&quot;year,phase,team1,team2,winner&quot;, Schema = &quot;year(int),phase(int),team1,team2,winner&quot;&gt;

let file = __SOURCE_DIRECTORY__ + &quot;\Data\champions.csv&quot;;
let text = File.ReadAllText(file)

let championsLeagues = ChampionsLeague.Load(file);
</code></pre>

<p>And finally, let&rsquo;s parse the data into the recently defined types:</p>

<pre><code>let champions =
    championsLeagues.Rows
    |&gt; Seq.map(fun r -&gt; {Year = r.Year; Round = r.Phase; Team1 = r.Team1; Team2 = r.Team2; Winner = r.Winner})
</code></pre>

<h2 id="glories-from-the-past">Glories from the past</h2>

<p>First of all let&rsquo;s review how many times a Premier League team has won the Champions League in the last twelve years. Premier League teams are very powerfull and they play a great football, I&rsquo;m sure we&rsquo;ll find a lot.</p>

<pre><code>let championsWonBy teams =
    champions
    |&gt; Seq.filter(fun f -&gt; f.Round = 1 &amp;&amp; teams |&gt; Array.contains f.Winner)

championsWonBy [|&quot;Liverpool&quot;; &quot;Man. United&quot;; &quot;Chelsea&quot;; &quot;Man. City&quot;; &quot;Arsenal&quot;|] 
</code></pre>

<p>Not too bad. Liverpool in 2005, Manchester United in 2008 and Chelsea in 2012 won the Champions League. So, every 3.5 years a Premier League team wins the Champions League. Maybe 2016 will be the next time?</p>

<p>Let&rsquo;s compare that with other leagues, I&rsquo;m sure Premier League will be the strongest one!</p>

<p>Germany and Portugal have won 1 cup, Italy 2 and Spain 5. That puts Premier League in second position, not bad!</p>

<p>As I&rsquo;m F.C. Barcelona fan, let me see how many Champions League we won in the past twelve years&hellip; 4. One more than the whole Premier League&hellip; Well, we have <a href="https://www.youtube.com/watch?v=r7Wa3ZKRZc8">Messi</a>. It&rsquo;s like cheating a bit&hellip; ;)</p>

<h2 id="round-of-16">Round of 16</h2>

<p>In the round of 16 there were two teams representing Premier League: Arsenal and Manchester City. Arsenal played against Barcelona and they lost. Let&rsquo;s study their last matches to see if that was an unexpected result:</p>

<pre><code>let roundWith team1 team2 =
    champions
    |&gt; Seq.filter(fun f-&gt; (f.Team1 = team1 &amp;&amp; f.Team2 = team2) || (f.Team1 = team2 &amp;&amp; f.Team2 = team1))

roundWith &quot;Arsenal&quot; &quot;Barcelona&quot;
</code></pre>

<p>That gives us three results: Final of 2006, quarter-finals of 2010 and round of 16 of 2011. In all theses matches Barcelona won, so it wasn&rsquo;t a great surprise that this year they&rsquo;ve won too&hellip;</p>

<p>Let&rsquo;s study Manchester City a bit. We can start analysing how many times they&rsquo;ve played a quarter-final match.</p>

<pre><code>let timesInPhase phase team =
    champions
    |&gt; Seq.filter(fun g -&gt; (g.Team1 = team || g.Team2 = team ) &amp;&amp; g.Round = phase)
    |&gt; Seq.length

&quot;Man. City&quot; |&gt; timesInPhase 4
</code></pre>

<p>Wow, they never played a quarter-final game! Let&rsquo;s study then their games in round of 16. They are a very rich and powerful team, so I guess they have played a lot of games in that round.</p>

<pre><code>&quot;Man. City&quot; |&gt; timesInPhase 8
</code></pre>

<p>Mmmmm&hellip; only two. Let&rsquo;s take a look at those games</p>

<pre><code>let gamesInRound round team =
    champions
    |&gt; Seq.filter(fun g -&gt; (g.Team1 = team || g.Team2 = team ) &amp;&amp; g.Round = round)

&quot;Man. City&quot; |&gt; gamesInRound 8
</code></pre>

<p>They played both times against Barcelona and they lost&hellip; So, Barcelona is definetively a rival to avoid in the next round.</p>

<p>Manchester City plays against Paris St Germain. Have they played any game before?</p>

<pre><code>roundWith &quot;Man. City&quot; &quot;Paris&quot;
</code></pre>

<p>No, they&rsquo;ve never played before. Let&rsquo;s take a look at PSG games in quarter finals:</p>

<pre><code>&quot;Paris&quot; |&gt; gamesInRound 4
</code></pre>

<p>PSG has played three times in quarter finals. Two against Barcelona (2013 and 2015) and one against Chelsea (2014). They have lost the three of them, so it could be a good team to play against.</p>

<h2 id="semifinals">Semifinals</h2>

<p>Let&rsquo;s imagine Manchester City wins PSG at quarter-final round. Which team could be the best rival to play against? Let&rsquo;s see if anyone of those teams have never played a semi-final round.</p>

<pre><code>let rivals = [&quot;Barcelona&quot;; &quot;Real Madrid&quot;; &quot;Atletico&quot;; &quot;Wolfsburg&quot;; &quot;Bayern&quot;; &quot;Benfica&quot;]

rivals
|&gt; Seq.filter(fun f -&gt; timesInPhase 2 f = 0)
</code></pre>

<p>Wolfsburg and Benfica have never played a semi-final. Actually, only they have never played a final (remember, in the last twelve years). And yes, this is the first time they are playing a quarter final. So let&rsquo;s study a bit their rivals to see which of them have more chances to win.</p>

<p>Wolfsburg plays agains Real Madrid. Let&rsquo;s see how Real Madrid played the quarter final round:</p>

<pre><code>&quot;Real Madrid&quot; |&gt; gamesInRound 4 |&gt; Seq.length
&quot;Real Madrid&quot; |&gt; gamesInRound 4 |&gt; Seq.filter(fun f-&gt; f.Winner &lt;&gt; &quot;Real Madrid&quot;) |&gt; Seq.length
</code></pre>

<p>They played six times and they won five. They don&rsquo;t seem a good team to play against.</p>

<p>Lets take a look at Bayern, Benfica&rsquo;s rival. They&rsquo;ve played eight times the quarter final round, and they&rsquo;ve been eliminated three times. In 2005 they lost against Chelsea (finalist). In 2007 they lost against Milan (semi-finalist) and in 2009 they lost against Barcelona (winner). So, although they&rsquo;ve lost against great teams, it looks like Benfica has more chances to win them than Wolfsburg to win Real Madrid.</p>

<p>In case nor Benfica neither Wolfsburg can win their games, who will be a good rival? Well, we can say that the best rival is the one that has less percentage of winnings in semi-finals. Let&rsquo;s calculate it.</p>

<pre><code>let winsInRound round team =
    let games = team |&gt; gamesInRound round
    float (games 
            |&gt; Seq.filter(fun f -&gt; f.Winner = team)
            |&gt; Seq.length ) / float (games |&gt; Seq.length)

rivals
|&gt; Seq.map(fun f -&gt; f, f |&gt; winsInRound 2)
|&gt; Seq.sortBy snd 
</code></pre>

<p>Looks like Real Madrid is the worst team playing semi-finals. So, if Benfica or Wolfsburg can&rsquo;t pass to semi-final, maybe Real Madrid could be a good rival.</p>

<h2 id="final">Final</h2>

<p>Let&rsquo;s get the teams with worst percentage of victories in a Champions League final.</p>

<pre><code>rivals
|&gt; Seq.map(fun f -&gt; f, f |&gt; winsInRound 1)
|&gt; Seq.sortBy snd
</code></pre>

<p>Well, Barcelona is not a very good rival&hellip; They&rsquo;ve played four finals and they&rsquo;ve won all of them. Something similar applies to Real Madrid, but just for one final. Bayern only wins one of every three finals they play. And Atletico only has played one final and they&rsquo;ve lost it. So, if Manchester City gets to the final, Atletico could be a good rival.</p>

<h2 id="recap">Recap</h2>

<p>Well, taking a look at the last twelve years results it&rsquo;s quite clear that no Premier League team will win this Champions League edition. But there&rsquo;s a little chance to win if they play well and have luck in the next draw. Only one thing seems clear: don&rsquo;t play against Barcelona!! :-)</p>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Vicenç García</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">01-01-0001</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/aprils-fools-day/">April&#39;s fools day</a>
          
          <a href="/tags/f/">F#</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/agile-dev-practices/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Agile Dev Practices</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
          <a class="next" href="/post/arrays-in-fsharp/">
            <span class="next-text nav-default">Arrays in F#</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'vgaltes';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:vgaltes@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://linkedin.com/in/vgaltes" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://twitter.com/vgaltes" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/vgaltes" class="iconfont icon-github" title="github"></a>
  <a href="http://example.org/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2013 - 
    2019
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Vicenç García</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>








</body>
</html>
