<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Sequences in F# - VGALTES blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Vicenç García" />
  <meta name="description" content="A sequence is a list of potential values (all of them of the same type) computed on demand.
Sequence creation As with arrays there are several ways to create a sequence.
Create from a range expression
You can create a new sequence from a range expression. In this case, instead of using [| and |] you should use { and }
let numbers = {1..20}  Create from a sequence expression" />







<meta name="generator" content="Hugo 0.40.1" />


<link rel="canonical" href="http://example.org/post/2016-02-20-sequences-in-fsharp/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">







<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link href="/lib/fancybox/jquery.fancybox-3.1.20.min.css" rel="stylesheet">




<meta property="og:title" content="Sequences in F#" />
<meta property="og:description" content="A sequence is a list of potential values (all of them of the same type) computed on demand.
Sequence creation As with arrays there are several ways to create a sequence.
Create from a range expression
You can create a new sequence from a range expression. In this case, instead of using [| and |] you should use { and }
let numbers = {1..20}  Create from a sequence expression" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/post/2016-02-20-sequences-in-fsharp/" />
















<meta itemprop="name" content="Sequences in F#">
<meta itemprop="description" content="A sequence is a list of potential values (all of them of the same type) computed on demand.
Sequence creation As with arrays there are several ways to create a sequence.
Create from a range expression
You can create a new sequence from a range expression. In this case, instead of using [| and |] you should use { and }
let numbers = {1..20}  Create from a sequence expression">



<meta itemprop="wordCount" content="1087">



<meta itemprop="keywords" content="data structures,F#," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Sequences in F#"/>
<meta name="twitter:description" content="A sequence is a list of potential values (all of them of the same type) computed on demand.
Sequence creation As with arrays there are several ways to create a sequence.
Create from a range expression
You can create a new sequence from a range expression. In this case, instead of using [| and |] you should use { and }
let numbers = {1..20}  Create from a sequence expression"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">VGALTES</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">VGALTES</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Sequences in F#</h1>

      <div class="post-meta">
        <span class="post-time"> 01-01-0001 </span>
        <div class="post-category">
            
              <a href="/categories/fsharp/"> FSharp </a>
            
          </div>
        <span class="more-meta"> 1087 words </span>
        <span class="more-meta"> 6 mins read </span>
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#sequence-creation">Sequence creation</a></li>
<li><a href="#operations-in-seq-module">Operations in Seq module</a>
<ul>
<li><a href="#summary">Summary</a></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<p>A sequence is a list of potential values (all of them of the same type) computed on demand.</p>

<h3 id="sequence-creation">Sequence creation</h3>

<p>As with <a href="http://vgaltes.com/fsharp/arrays-in-fsharp/">arrays</a> there are several ways to create a sequence.</p>

<p><strong>Create from a range expression</strong></p>

<p>You can create a new sequence from a range expression. In this case, instead of using <code>[|</code> and <code>|]</code> you should use <code>{</code> and <code>}</code></p>

<pre><code class="language-fsharp">    let numbers = {1..20}
</code></pre>

<p><strong>Create from a sequence expression</strong></p>

<p>You can use an expression inside brackets (and after seq keyword) to create a new sequence:</p>

<pre><code class="language-fsharp">    let numbers = seq {for i in 1..20 do yield i}
</code></pre>

<p>We can write a compacted version using the forward arrow followed by the value to yield:</p>

<pre><code class="language-fsharp">    let numbers = seq {for i in 1..20 -&gt; i}
</code></pre>

<p><strong>Create using a function in the Seq module</strong></p>

<p>As with arrays, there are some functions in the Seq module to create a sequence.</p>

<p>We can use Seq.init to initialise a sequence of n elements.</p>

<pre><code class="language-fsharp">    let numbers = Seq.init 20 (fun i -&gt; i * 2)
</code></pre>

<p>Or we can use initInifinite to create an infinite sequence.</p>

<pre><code class="language-fsharp">    let numbers = Seq.initInfinite (fun i -&gt; i * 2)
</code></pre>

<p>Finally, we can also create a sequence directly from an IEnumerable</p>

<pre><code class="language-fsharp">    let files =
        System.IO.Directory.EnumerateDirectories(&quot;C:\\Windows&quot;)
        |&gt; Seq.map(fun f -&gt; f.Length)
</code></pre>

<h3 id="operations-in-seq-module">Operations in Seq module</h3>

<p>All the operations we&rsquo;ve seen in the last article about arrays are applicable to this one, changing Array by Seq (i.e. from Array.iter to Seq.iter) and the behavior is the same. Let&rsquo;s see some other functions that can be valuable.</p>

<p><strong>Seq.unfold</strong></p>

<p>Unfold is a way to generate a sequence from a generator function. You can see it as an extension to Seq.initInfinite. The function takes two parameters: the first one is the generator function, which must return an <a href="http://fsharpforfunandprofit.com/posts/the-option-type/">option</a> tuple with the next element of the sequence and the next state value to be passed to the next iteration. The second parameter is the initial state.</p>

<p>For example, if we want to generate the square of a number up to a certain threshold we can do something like this</p>

<pre><code class="language-fsharp">    &gt;let squareUpTo (top) =
        1
        |&gt; Seq.unfold(fun i -&gt; if ( i*i &gt; top ) then None
                                else Some(i*i, i + 1))
                                
    1 4 9 16 25 36 49 64 81 100 121 144 169 196 225 256 289 324 361 400 441 484 529 576 625 676 729 784 841 900 961 
</code></pre>

<p>The first 1 is the initial state, in this case 1. This initial state is passed to unfold function. The generator checks if the result will be greater than the threshold and, if it is, returns None. If it isn&rsquo;t, returns a tuple with the next element of the sequence (in this case de square) and the next state to be passed to unfold (in this case the next number).</p>

<p><strong>Seq.find</strong></p>

<p>Find takes a boolean as a parameter and returns the first element of the sequence that where the function returns true. If it can&rsquo;t find any result, returns an exception.</p>

<p>Following the previous example if we do</p>

<pre><code class="language-fsharp">    &gt;let j = 
        squares
        |&gt; Seq.find(fun i -&gt; i &lt; 0)
</code></pre>

<p>We get the following error
    System.Collections.Generic.KeyNotFoundException: Exception of type &lsquo;System.Collections.Generic.KeyNotFoundException&rsquo; was thrown.</p>

<p>On the other hand, if we do</p>

<pre><code class="language-fsharp">    let j = 
        squares
        |&gt; Seq.find(fun i -&gt; i &gt; 200 )
</code></pre>

<p>We get</p>

<pre><code class="language-fsharp">    val j : int = 225
</code></pre>

<p>If we don&rsquo;t want to get an exception, we can use the tryFind function, which returns an option type. Then, the follwing code</p>

<pre><code class="language-fsharp">    let j = 
        squares
        |&gt; Seq.tryFind(fun i -&gt; i &lt; 0)
</code></pre>

<p>Returns</p>

<pre><code class="language-fsharp">    val j : int option = None
</code></pre>

<p><strong>Seq.pick</strong></p>

<p>Given a sequence takes the first result of the function provided as a parameter that is not a None (the function must return an option)</p>

<pre><code class="language-fsharp">    let j = 
        squares
        |&gt; Seq.pick(fun i -&gt; if (i &gt; 200) then Some(i) else None)
        
    val j : int = 225
</code></pre>

<p>If there isn&rsquo;t any valid value, it throws an exception. If you want to avoid this, use tryPick.</p>

<p><strong>Seq.findIndex</strong></p>

<p>Same as Seq.find but returns the index of the element, not the element itself. If you want to avoid the exception, use tryFindIndex.</p>

<pre><code class="language-fsharp">    let j = 
        squares
        |&gt; Seq.findIndex(fun i -&gt; i &gt; 200 )

    val j : int = 14
</code></pre>

<p><strong>Seq.exists</strong></p>

<p>Returns true if the function supplied returns true for any of the values of the sequence.</p>

<pre><code class="language-fsharp">    let j =
        squares
        |&gt; Seq.exists(fun i -&gt; i = 100)

    val j : bool = true
</code></pre>

<p><strong>Seq.groupBy</strong></p>

<p>Groups a sequence by the results of the function supplied. Returns sequence of key/value pairs.</p>

<pre><code class="language-fsharp">    let howBigIsTheNumber i =
        if i &lt; 100 then &quot;Small&quot;
        elif i &lt; 500 then &quot;Medium&quot;
        else &quot;Big&quot;

    let groupedSquares =
    squares
    |&gt; Seq.groupBy(fun i -&gt; howBigIsTheNumber i)
</code></pre>

<p><strong>Seq.disctint</strong></p>

<p>Given a sequence, return only the unique elements</p>

<pre><code class="language-fsharp">    &gt;let random = System.Random()
     let randomNumbers = Seq.init 50 (fun i -&gt; random.Next(1, 5))
     let disctintNumbers =
        randomNumbers
        |&gt; Seq.distinct
        |&gt; Seq.iter (fun i -&gt; printf &quot;%d &quot; i )

    3 2 1 4
</code></pre>

<p>If we need to get the disctint elements given a function, we can use disctintBy</p>

<p><strong>Seq.pairwise</strong></p>

<p>Given a sequence creates a sequence of tuples. The first tuple will contain the first and second element of the original sequence, the second tuple will contain the second and third, and so on.</p>

<pre><code class="language-fsharp">    &gt;let numbers = {1..5}
    let tNumbers = 
    numbers
    |&gt; Seq.pairwise
    |&gt; Seq.iter (fun i -&gt; printf &quot;(%d, %d) &quot; (fst i) (snd i) )
    
    (1, 2) (2, 3) (3, 4) (4, 5) 
</code></pre>

<p><strong>Seq.windowed</strong></p>

<p>Given a sequence creates a sequence of arrays of the length supplied. The first array will contain the elements between the first element of the original sequence and length. The second one will contain the elements between the second element of the original sequence and length + 1, and so on.</p>

<pre><code class="language-fsharp">    &gt;let numbers = {1..10}
     let tNumbers = 
        numbers
        |&gt; Seq.windowed 5
        |&gt; Seq.iter (fun i -&gt; printf &quot;%s\n&quot; ( String.Join(&quot;,&quot;, i)) )
        
    1,2,3,4,5
    2,3,4,5,6
    3,4,5,6,7
    4,5,6,7,8
    5,6,7,8,9
    6,7,8,9,10
</code></pre>

<p><strong>Seq.collect</strong></p>

<p>Given a sequences applies a function to each element that creates a sequence and concatenates the results:</p>

<pre><code class="language-fsharp">    &gt;let numbers = {1..5}
    numbers
    |&gt; Seq.collect (fun i -&gt; {i*10..i*10+5} )
    |&gt; Seq.iter (fun i -&gt; printf &quot;%d &quot; i )
    
    10 11 12 13 14 15 20 21 22 23 24 25 30 31 32 33 34 35 40 41 42 43 44 45 50 51 52 53 54 55 
</code></pre>

<h4 id="summary">Summary</h4>

<p>In this article, we&rsquo;ve continued taking a look at data structures in F#, in this case sequences. We&rsquo;ve seen some other functions that can also be applied to other data structures.</p>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">Vicenç García</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">01-01-0001</span>
  </p>
  
  
</div>

    
    

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/data-structures/">data structures</a>
          
          <a href="/tags/f/">F#</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/2016-04-20-forms-with-suave-experimental-and-suave-forms/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">Sending forms with Suave, Suave.Experimental and Suave.Forms</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'vgaltes';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:vgaltes@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://linkedin.com/in/vgaltes" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="https://twitter.com/vgaltes" class="iconfont icon-twitter" title="twitter"></a>
      <a href="https://github.com/vgaltes" class="iconfont icon-github" title="github"></a>
  <a href="http://example.org/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    
      2013 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Vicenç García</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script><script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox-3.1.20.min.js"></script>


<script type="text/javascript" src="/dist/even.min.js?v=3.2.0"></script>








</body>
</html>
